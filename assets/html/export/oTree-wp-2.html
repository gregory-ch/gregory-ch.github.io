---
layout: reveal
title: "My Slides2"
permalink: /assets/html/export/oTree-wp-2.html
---

<body>

            
            <section >
                    
                <h2>Programming Experiments with oTree</h2>

            </section>





            <section >
                
                <h3>Setting Up the Environment</h3>

                </section>





            <section >
                
                <h4>Quick start: Environment Setup</h4>
        <div style="font-size: 0.6em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column: Mac/Linux -->
        <p><strong>Mac/Linux:</strong></p>
        <ol>
        <li>Install Python</li>
        </ol>
        <pre><code class="language-bash"># Mac with Homebrew
        brew install python3

        # Ubuntu/Debian
        sudo apt install python3 python3-pip
        </code></pre>
        <ol start="2">
        <li>Create and activate virtual environment</li>
        </ol>
        <p>Option 1: venv</p>
        <pre><code class="language-bash">python3 -m venv otree_env
        source otree_env/bin/activate
        </code></pre>
        <p>Option 2: conda</p>
        <pre><code class="language-bash"># Download &amp; install Miniconda from:
        # https://docs.conda.io/en/latest/miniconda.html

        conda create -n otree_env python=3.10
        conda activate otree_env
        </code></pre>
        <ol start="3">
        <li>Install oTree</li>
        </ol>
        <pre><code class="language-bash">pip install otree
        </code></pre>
        </div>
        <div> <!-- Right Column: Windows -->
        <p><strong>Windows:</strong></p>
        <ol>
        <li>
        <p>Install Python</p>
        <ul>
        <li>Download from <a href="http://python.org">python.org</a></li>
        <li>Check "Add Python to PATH"</li>
        <li>Open PowerShell/CMD as admin</li>
        </ul>
        </li>
        <li>
        <p>Create and activate virtual environment</p>
        </li>
        </ol>
        <p>Option 1: venv</p>
        <pre><code class="language-powershell">python -m venv otree_env
        .\otree_env\Scripts\activate
        </code></pre>
        <p>Option 2: conda</p>
        <pre><code class="language-powershell"># Download &amp; install Miniconda from:
        # https://docs.conda.io/en/latest/miniconda.html

        conda create -n otree_env python=3.10
        conda activate otree_env
        </code></pre>
        <ol start="3">
        <li>Install oTree</li>
        </ol>
        <pre><code class="language-powershell">pip install otree
        </code></pre>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Quick start: Project Setup</h4>
        <ol>
        <li>Create new project</li>
        </ol>
        <pre><code class="language-bash">otree startproject guessing_game
        cd guessing_game
        otree startapp guessing_app
        </code></pre>
        <ol start="2">
        <li>Run development server</li>
        </ol>
        <pre><code class="language-bash">otree devserver
        </code></pre>
        <p>Database Configuration</p>
        <div style=" display: grid; grid-template-columns: 1fr 1fr; gap: 20px;  font-size: 0.75em;">
        <div>
        <ul>
        <li>By devserver: SQLite
        <ul>
        <li>Created automatically</li>
        <li>Runs on same server as app</li>
        </ul>
        </li>
        </ul>
        </div>
        <div>   
        <ul>
        <li>On Heroku: PostgreSQL
        <ul>
        <li>Runs on separate server</li>
        <li>More reliable, scalable</li>
        <li>Requires additional setup</li>
        </ul>
        </li>
        </ul>
        </div>
                </section>





            <section >
                
                <h3>Detailed Structure and Workflow in oTree</h3>

                </section>





            <section >
                
                <h4>Main building blocks of any game</h4>
        <ul>
        <li>Data input/collection</li>
        <li>Data processing:
        <ul>
        <li>calculation of payoffs and other properties based on input</li>
        <li>Interaction of data across players (not in all games)</li>
        </ul>
        </li>
        <li>More data collection</li>
        <li>Showing the results and other info</li>
        <li>(Repeat - for multi-round games)</li>
        </ul>

                </section>





            <section >
                
                <h4>Typical Game Blueprint</h4>
        <div style="font-size: 0.6em;">
        <table>
        <thead>
        <tr>
        <th>Blueprint</th>
        <th>Guess Game</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>1. How many players?</td>
        <td>1 player</td>
        </tr>
        <tr>
        <td>2. Real-time interaction?</td>
        <td>No interaction</td>
        </tr>
        <tr>
        <td>3. Number of rounds?</td>
        <td>1 round (or more)</td>
        </tr>
        <tr>
        <td>4. Different roles?</td>
        <td>No roles</td>
        </tr>
        <tr>
        <td>5. Main stages?</td>
        <td>Generating random number, letting player guess, show results</td>
        </tr>
        <tr>
        <td>6. When are payoffs calculated?</td>
        <td>After the guess is made</td>
        </tr>
        <tr>
        <td>7. Info needed from other players?</td>
        <td>No info needed</td>
        </tr>
        <tr>
        <td>8. External information needed?</td>
        <td>Pre-generated random number</td>
        </tr>
        <tr>
        <td>9. Treatment variations?</td>
        <td>No treatments</td>
        </tr>
        </tbody>
        </table>
        </div>
                </section>





            <section >
                
                <h4>Guessing Game: Configuration (<a href="http://settings.py">settings.py</a>)</h4>
        <pre><code class="language-python">SESSION_CONFIGS = [
        dict(
            name='guessing_game',
            app_sequence=['guessing_app'],
            num_demo_participants=1,
        ),
        ]
        </code></pre>
        <p>File location:</p>
        <pre><code>otree_workshop/
        ‚îî‚îÄ‚îÄ guessing_game/            
        ‚îú‚îÄ‚îÄ _static/              
        ‚îú‚îÄ‚îÄ _templates/          
        ‚îú‚îÄ‚îÄ guessing_app/         
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py      
        ‚îÇ   ‚îú‚îÄ‚îÄ Instructions.html 
        ‚îÇ   ‚îú‚îÄ‚îÄ MyPage.html
        ‚îÇ   ‚îî‚îÄ‚îÄ Results.html
        ‚îî‚îÄ‚îÄ settings.py ‚≠ê 
        </code></pre>

                </section>





            <section >
                
                <h4>Data processing: first intro</h4>
        <ol>
        <li>
        <p>Models: where the data is stored</p>
        <ul>
        <li>Player</li>
        <li>Group</li>
        <li>Subsession models</li>
        </ul>
        </li>
        <li>
        <p>Field types</p>
        </li>
        <li>
        <p>Field properties: (doc, verbose_name, max/min, choices, and other field properties)</p>
        </li>
        </ol>

                </section>





            <section >
                
                <h4>Guessing Game: Constants</h4>
        <pre><code class="language-python">class C(BaseConstants):
        NAME_IN_URL = 'guessing_app'
        PLAYERS_PER_GROUP = None
        NUM_ROUNDS = 2
        ENDOWMENT = cu(100)
        MIN_NUMBER = 0
        MAX_NUMBER = 90
        </code></pre>
        <p>File location:</p>
        <pre><code>otree_workshop/
        ‚îî‚îÄ‚îÄ guessing_game/            
        ‚îú‚îÄ‚îÄ _static/              
        ‚îú‚îÄ‚îÄ _templates/          
        ‚îú‚îÄ‚îÄ guessing_app/         
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py ‚≠ê    
        ‚îÇ   ‚îú‚îÄ‚îÄ Instructions.html 
        ‚îÇ   ‚îú‚îÄ‚îÄ MyPage.html
        ‚îÇ   ‚îî‚îÄ‚îÄ Results.html
        ‚îî‚îÄ‚îÄ settings.py 
        </code></pre>

                </section>





            <section >
                
                <h4>Guessing Game: Player Model</h4>
        <pre><code class="language-python">class Player(BasePlayer):
        computer_number = models.IntegerField()
        guess = models.IntegerField(
            min=C.MIN_NUMBER, 
            max=C.MAX_NUMBER,
            label=&quot;Please, insert any number from {} to {}&quot;
        )

        </code></pre>
        <p>File location:</p>
        <pre><code>otree_workshop/
        ‚îî‚îÄ‚îÄ guessing_game/            
        ‚îú‚îÄ‚îÄ _static/              
        ‚îú‚îÄ‚îÄ _templates/          
        ‚îú‚îÄ‚îÄ guessing_app/         
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py ‚≠ê    
        ‚îÇ   ‚îú‚îÄ‚îÄ Instructions.html 
        ‚îÇ   ‚îú‚îÄ‚îÄ MyPage.html
        ‚îÇ   ‚îî‚îÄ‚îÄ Results.html
        ‚îî‚îÄ‚îÄ settings.py 
        </code></pre>

                </section>





            <section >
                
                <h4>Anatomy of an oTree Page</h4>
        <div style="font-size: 0.75em;">
        <ul>
        <li>
        <p>Page creation:</p>
        <ul>
        <li>class definition</li>
        <li>template</li>
        </ul>
        </li>
        <li>
        <p>When/if/for whom it is</p>
        <ul>
        <li>position in page_sequence</li>
        <li>method</li>
        </ul>
        <pre><code class="language-python">is_displayed 
        </code></pre>
        </li>
        <li>
        <p>What is shown:</p>
        <pre><code class="language-python">vars_for_template
        </code></pre>
        </li>
        <li>
        <p>What to do next:</p>
        <pre><code class="language-python">before_next_page()
        </code></pre>
        </li>
        </ul>
        </div>
                </section>





            <section >
                
                <h4>Page Creation Basics</h4>
        <div style="font-size: 0.75em;">
        1. Define Page Class
        </div>
        <pre><code class="language-python">class NameOfThePage(Page):
        pass
        </code></pre>
        <div style="font-size: 0.75em;">
        2. Add to Page Sequence
        </div>
        <pre><code class="language-python">page_sequence = [NameOfThePage]
        </code></pre>
        <div style="font-size: 0.75em;">
        <ol start="3">
        <li>Create Template
        <ul>
        <li>Template name must match page class name</li>
        <li>Example: <code>NameOfThePage.html</code></li>
        <li>Located in same folder as <code>__init__.py</code></li>
        </ul>
        </li>
        </ol>
        </div>
        <div style="font-size: 0.75em;">
        <p>File location:</p>
        <pre><code>otree_workshop/
        ‚îî‚îÄ‚îÄ guessing_game/            
        ‚îú‚îÄ‚îÄ _static/              
        ‚îú‚îÄ‚îÄ _templates/          
        ‚îú‚îÄ‚îÄ guessing_app/         
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        ‚≠ê 
        ‚îú‚îÄ‚îÄ ‚îú‚îÄ‚îÄ Instructions.html 
        ‚îÇ   ‚îú‚îÄ‚îÄ NameOfThePage.html ‚≠ê
        ‚îÇ   ‚îî‚îÄ‚îÄ Results.html
        ‚îî‚îÄ‚îÄ settings.py 
        </code></pre>
        </div>
                </section>





            <section >
                
                <h4>Guessing Game: Page Flow</h4>
        <div style="font-size: 0.7em; overflow-x: auto; max-width: 100%;">
        <pre><code class="language-python">class Instructions(Page):
        @staticmethod
        def before_next_page(player, timeout_happened):
            player.computer_number = random.randint(
                C.MIN_NUMBER, C.MAX_NUMBER
            )

        class MyPage(Page):
        form_model = 'player'
        form_fields = ['guess']

        @staticmethod
        def before_next_page(player, timeout_happened):
            difference = abs(player.computer_number - player.guess)
            player.payoff = C.ENDOWMENT - difference

        class Results(Page):
        @staticmethod
        def vars_for_template(player):
            guess = player.field_maybe_none('guess')
            difference = abs(player.computer_number - guess) if guess is not None else 0
            return {
                'difference': difference
            }
        </code></pre>
        </div>
        <p>Page sequence:</p>
        <pre><code class="language-python">page_sequence = [Instructions, MyPage, Results]
        </code></pre>

                </section>





            <section >
                
                <h4>Templates: Using Variables</h4>
        <div style="font-size: 0.7em;">
        <ol>
        <li>From <code>vars_for_template</code>:</li>
        </ol>
        <pre><code class="language-python">@staticmethod
        def vars_for_template(player):
        return {
            'my_var': 42,
            'my_list': [1, 2, 3],
            'my_dict': {'key': 'value'}
        }
        </code></pre>
        <pre><code class="language-html">&lt;p&gt;Variable: {{ my_var }}&lt;/p&gt;
        &lt;p&gt;List item: {{ my_list.0 }}&lt;/p&gt;
        &lt;p&gt;Dict value: {{ my_dict.key }}&lt;/p&gt;
        </code></pre>
        <ol start="2">
        <li>Built-in model variables:</li>
        </ol>
        <pre><code class="language-html">&lt;!-- Constants --&gt;
        &lt;p&gt;Endowment: {{ C.ENDOWMENT }}&lt;/p&gt;

        &lt;!-- Player variables --&gt;
        &lt;p&gt;Payoff: {{ player.payoff }}&lt;/p&gt;
        &lt;p&gt;ID in group: {{ player.id_in_group }}&lt;/p&gt;

        &lt;!-- Group variables --&gt;
        &lt;p&gt;Group ID: {{ group.id }}&lt;/p&gt;

        &lt;!-- Subsession variables --&gt;
        &lt;p&gt;Round number: {{ subsession.round_number }}&lt;/p&gt;
        </code></pre>
        </div>
                </section>





            <section >
                
                <h4>Templates: Including Files &amp; Special Tags</h4>
        <div style="font-size: 0.7em;">
        <ol>
        <li>Including other templates:</li>
        </ol>
        <pre><code class="language-html">&lt;!-- Include entire file --&gt;
        {{ include 'app_name/Instructions.html' }}

        &lt;!-- Include specific blocks --&gt;
        {{ include 'global/Header.html' }}
        </code></pre>
        <ol start="2">
        <li>Special oTree tags:</li>
        </ol>
        <pre><code class="language-html">&lt;!-- Submission buttons --&gt;
        {{ next_button }}
        &lt;button&gt;
        Clicking this will submit the form
        &lt;/button&gt;

        &lt;button type=&quot;button&quot;&gt;
        Clicking this will not submit the form
        &lt;/button&gt;

        &lt;!-- Form elements --&gt;
        {{ formfields }}
        {{ formfield 'specific_field' }}

        &lt;!-- Blocks --&gt;
        {{ block title }}
        Page Title
        {{ endblock }}
        </code></pre>
        </div>
                </section>





            <section >
                
                <h4>Guessing Game: Templates</h4>
        <p>Instructions.html:</p>
        <div style="font-size: 0.7em; overflow-x: auto; max-width: 100%;">
        <pre><code class="language-html">{{ block title }}
        Instructions
        {{ endblock }}

        {{ block content }}
        &lt;div class=&quot;card&quot;&gt;
            &lt;div class=&quot;card-body&quot;&gt;
                &lt;p&gt;You have an endowment of {{C.ENDOWMENT}}.&lt;/p&gt;
                &lt;p&gt;The computer will generate a number from {{C.MIN_NUMBER}} 
                    to {{C.MAX_NUMBER}} .&lt;/p&gt;
                &lt;p&gt;You have to guess this number.&lt;/p&gt;
                &lt;p&gt;The closer is your guess the more you will earn.&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        {{ next_button }}
        {{ endblock }} 
        </code></pre>
        </div>
                </section>





            <section >
                
                <p>MyPage.html (Decision Page):</p>
        <div style="font-size: 0.7em; overflow-x: auto; max-width: 100%;">
        <pre><code class="language-html">{{ block title }}
        Make your guess
        {{ endblock }}

        {{ block content }}
        &lt;div class=&quot;card&quot;&gt;
            &lt;div class=&quot;card-body&quot;&gt;
                &lt;p&gt;You have an endowment of {{C.ENDOWMENT}}.&lt;/p&gt;
                &lt;p&gt;The computer will generate a number 
                    from {{C.MIN_NUMBER}} to {{C.MAX_NUMBER}}.&lt;/p&gt;
                &lt;p&gt;You have to guess this number.&lt;/p&gt;
                &lt;p&gt;The closer is your guess the more you will earn.&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        {{ formfields }}
        {{ next_button }}
        {{ endblock }}
        </code></pre>
        </div>
                </section>





            <section >
                
                <p>Results.html:</p>
        <div style="font-size: 0.7em; overflow-x: auto; max-width: 100%;">
        <pre><code class="language-html">{{ block title }}
        Results
        {{ endblock }}

        {{ block content }}
        &lt;div class=&quot;card&quot;&gt;
            &lt;div class=&quot;card-body&quot;&gt;
                &lt;p&gt;The number that computer generated was: 
                    {{ player.computer_number }}&lt;/p&gt;
                &lt;p&gt;Your guess was: {{ player.guess }}&lt;/p&gt;
                &lt;p&gt;The difference is: {{ difference }}&lt;/p&gt;
                &lt;p&gt;Your final earning is: 
                    {{C.ENDOWMENT}} - {{ difference }} points = {{ player.payoff }} &lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        {{ next_button }}
        {{ endblock }}
        </code></pre>
        </div>
                </section>





            <section >
                
                <h3>Hosting and Resources for oTree</h3>

                </section>





            <section >
                
                <h4>Git</h4>
        <div style="font-size: 0.75em;">
        <ol>
        <li>Initialize repository</li>
        </ol>
        <pre><code class="language-bash">git init
        </code></pre>
        <ol start="2">
        <li>Stage &amp; commit changes</li>
        </ol>
        <pre><code class="language-bash">git add .                        # Stage all files
        git commit -m &quot;Commit message&quot;   # Save changes
        </code></pre>
        <ol start="3">
        <li>Connect to remote</li>
        </ol>
        <pre><code class="language-bash">git remote add origin &lt;REPO_URL&gt;
        git push origin master
        </code></pre>
        <ol start="4">
        <li>Undo &amp; sync</li>
        </ol>
        <pre><code class="language-bash"># Rolling back
        git checkout &lt;COMMIT_ID&gt;    # Return to specific commit
        git stash                   # Temporarily store changes

        # Get updates
        git pull origin master      # Download &amp; merge changes
        </code></pre>
        <div style="font-size: 0.8em; margin-top: 20px;">
        üìö More info: <a href="http://rogerdudler.github.io/git-guide/">Git Guide</a>
        </div>
        </div>
        <!-- --- -->
        <!-- 
        #### Local vs Cloud

        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">

        <div>

        **Heroku** 
        - Cloud platform (many tools for deployment and management)
        - Free tier discontinued
        - Requires PostgreSQL
        - Good for:
        - Online experiments with high working load
        - Multiple concurrent sessions
        - Production deployment

        </div>

        <div>

        **Self-hosting**
        - Free (if you have own devise)
        - Need static IP (or use ngrok)
        - Need task manager and dependencies within env
        - Good for:
        - 20 - 50 participants (depends on your server)
        - Development


        </div> -->
                </section>





            <section >
                
                <h4>Deploying opportunities</h4>

                </section>





            <section >
                
                <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
        <p><strong>1. Heroku/Cloud Services</strong> (up to 500)</p>
        <ul>
        <li>Many tools for deployment and management</li>
        <li>Free tier discontinued</li>
        <li>Multiple concurrent sessions</li>
        </ul>
        <p><strong>2. oTree Hub</strong> (10-50)</p>
        <ul>
        <li>Free tier: 2 sites (addons not free)</li>
        <li>Make your code publically available</li>
        <li>Requires Heroku account</li>
        <li>Good for beginners</li>
        <li>Limited but sufficient for most</li>
        </ul>
        </div>
        <div>
        <p><strong>3. Local + ngrok</strong> (10-30)</p>
        <ul>
        <li>Streaming from your laptop</li>
        <li>Limited by your hardware</li>
        <li>Limited by connection and soft</li>
        <li>need to setup ngrok</li>
        </ul>
        <p><strong>4. Own Server (Advanced)</strong> (40-200)</p>
        <ul>
        <li>Requires server management skills</li>
        <li>Need static IP</li>
        <li>More setup work</li>
        <li>Need task manager and dependencies within env</li>
        </ul>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Local Deployment with ngrok</h4>
        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <p><strong>1. Setup ngrok</strong></p>
        <ul>
        <li>Register at <a href="https://ngrok.com">ngrok.com</a></li>
        <li>Get your authtoken from Dashboard</li>
        <li>Install pyngrok:</li>
        </ul>
        <pre><code class="language-bash">pip install pyngrok
        </code></pre>
        <p><strong>2. Configure Environment</strong></p>
        <pre><code class="language-bash"># Set environment variables within environment
        OTREE_AUTH_LEVEL=STUDY
        OTREE_ADMIN_PASSWORD=mypassword
        DATABASE_URL=postgresql://...

        </code></pre>
        <p><strong>3. Start oTree Server</strong></p>
        <pre><code class="language-bash"># Start production server
        otree prodserver 8000
        </code></pre>
        </div>
        <div> <!-- Right Column -->
        <p><strong>4. Install pyngrok</strong></p>
        <pre><code class="language-bash"># In activated environment
        pip install pyngrok
        </code></pre>
        <p><strong>5. Create Tunnel</strong></p>
        <pre><code class="language-python"># In Jupyter via VS Code or 
        # via terminal run python commands
        from pyngrok import ngrok

        # Set your authtoken
        ngrok.set_auth_token(&quot;your_token_here&quot;)

        # Create tunnel
        public_url = ngrok.connect(8000)
        print(f&quot;Public URL: {public_url}&quot;)
        </code></pre>
        <p>üí° <strong>Tips:</strong></p>
        <ul>
        <li>Use same Python environment as oTree</li>
        <li>Keep Jupyter/VS Code running</li>
        <li>URL changes each session</li>
        </ul>
        </div>
        </div>
                </section>





            <section >
                
                <h4>ngrok Setup: Token &amp; Tunnel</h4>
        <div style="font-size: 0.5em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <p><strong>1. Get Authtoken:</strong></p>
        <ul>
        <li>Go to ngrok Dashboard ‚Üí "Your Authtoken"</li>
        <li>Copy token for your configuration</li>
        <li>Keep it secure!</li>
        </ul>
        </div>
        <div> <!-- Right Column -->
        <p><strong>2. Run Server &amp; Tunnel:</strong></p>
        <ul>
        <li>Share generated URL with participants</li>
        <li>Don't forget to disconnect tunnel after session</li>
        </ul>
        <pre><code class="language-python">ngrok.disconnect(public_url)
        </code></pre>
        </div>
        </div>
        <div style="text-align: center; margin-top: -110px;">
        <div style="transform: scale(0.7);">
        <p><img src="/assets/html/export/images/screenshot5.png" alt="ngrok Dashboard"></p>
        </div>
        </div>

                </section>





            <section >
                
                <h4>Deploying via oTree Hub (plus heroku)</h4>
        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <p><strong>1. Local Preparation</strong></p>
        <pre><code class="language-bash"># Inside your project directory
        cd my_otree_app

        # Create deployment package
        otree zip
        # Creates: my_otree_app.otreezip
        </code></pre>
        <p><strong>2. Heroku Setup</strong></p>
        <ul>
        <li>Register on <a href="https://heroku.com">heroku.com</a></li>
        <li>Register on <a href="https://blog.heroku.com/github-student-developer-program">heroku Developer Program</a></li>
        <li>Add payment method (required)</li>
        <li>Create new app:
        <ul>
        <li>Go to Dashboard</li>
        <li>Click "Create new app"</li>
        <li>Choose app name</li>
        <li>Select region</li>
        </ul>
        </li>
        </ul>
        </div>
        <div> <!-- Right Column -->
        <p><strong>3. oTree Hub Connection</strong></p>
        <ol>
        <li>Go to <a href="https://www.otreehub.com">oTree Hub</a></li>
        <li>Navigate to "Heroku server deployment"</li>
        <li>Click "Connect oTree Hub to Heroku"</li>
        <li>Find your app in the list</li>
        <li>Click "Register"</li>
        </ol>
        <p>üí° Tip: Free tier includes 2 Heroku sites</p>
        </div>
        </div>
                </section>





            <section >
                
                <h4>oTree Hub: public (code available to everyone!)</h4>
        <div style="text-align: center;transform: scale(0.8);margin-top: -120px;">
        <p><img src="/assets/html/export/images/hub3.png" alt="oTree Hub Deployment Flow"></p>
        </div>
        <!-- <div style="font-size: 0.75em;">
        Register as public (code available to everyone!)
        <!-- **4. Deploy**
        - Upload .otreezip file
        - Select your Heroku app
        - Click "Deploy"
        - Wait for confirmation
        - Open app URL -->
        <!-- </div>  -->

                </section>





            <section >
                
                <h4>oTree Hub: Upload .otreezip file</h4>
        <!-- <div style="font-size: 0.75em;">

        **4. Deploy**
        - Upload .otreezip file
        - Select your Heroku app
        - Click "Deploy"
        - Wait for confirmation
        - Open app URL
        </div> -->
        <div style="text-align: center;transform: scale(0.8);margin-top: -80px;">
        <p><img src="/assets/html/export/images/screenshot4.png" alt="oTree Hub Deployment Flow"></p>
        </div>
                </section>





            <section >
                
                <h4>oTree Hub: Configuration &amp; Pricing</h4>
        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr;">
        <div> <!-- Left Column -->
        <p><strong>Recommended Setups:</strong></p>
        <ol>
        <li>
        <p>Development &amp; Testing</p>
        <ul>
        <li>Eco Dynos ($5/month)</li>
        <li>Suitable for development</li>
        <li>Good for small test sessions</li>
        <li>Covered by Student Program</li>
        </ul>
        </li>
        <li>
        <p>Load Testing Setup</p>
        <ul>
        <li>Basic Dynos ($5/month)</li>
        <li>PostgreSQL Mini ($5/month)</li>
        <li>Total: $10/month</li>
        <li>Covered by Student Program ($13/month)</li>
        </ul>
        </li>
        </ol>
        </div>
        <div> <!-- Right Column -->
        <p><strong>Why Use oTree Hub?</strong> <a href="https://www.otree.org/blog/why-use-hub-heroku.html">‚Üó</a></p>
        <ul>
        <li>Proper server configuration</li>
        <li>Performance monitoring</li>
        <li>Easier deployment process</li>
        <li>Reduced risk of data loss</li>
        <li>Better error handling</li>
        </ul>
        <p>üí° <strong>Resources:</strong></p>
        <ul>
        <li><a href="https://blog.heroku.com/github-student-developer-program">Student Developer Program</a> ($13/month credit)</li>
        <li><a href="https://youtu.be/H8Do08ub8bM">Deployment Tutorial</a> (older but useful)</li>
        </ul>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Deploying to Heroku</h4>
        <div style="font-size: 0.75em;">
        <ol>
        <li>Prerequisites:</li>
        </ol>
        <pre><code class="language-bash"># Sign up for Heroku
        # Install Heroku CLI
        # Initialize Git repository (see previous slide)
        </code></pre>
        <ol start="2">
        <li>Create &amp; deploy:</li>
        </ol>
        <pre><code class="language-bash"># Create new Heroku app
        heroku create &lt;APPNAME&gt;

        # Deploy code
        git push heroku master

        # Reset database
        heroku run otree resetdb
        </code></pre>
        <ol start="3">
        <li>Additional setup:</li>
        </ol>
        <pre><code class="language-bash"># Set config(environment variables, databaseurl, etc)
        heroku config:set OTREE_PRODUCTION=1
        heroku config:set OTREE_AUTH_LEVEL=DEMO

        # Check logs if needed
        heroku logs --tail
        </code></pre>

                </section>





            <section >
                
                <h4>Deploying to Heroku 2</h4>
        <div style="font-size: 0.75em;">
        <ol start="4">
        <li>
        <p>If needed: Add PostgreSQL:</p>
        <p>Open Heroku Dashboard ‚Üí Go to your app
        ‚Üí Click "Resources" tab ‚Üí Under "Add-ons"
        search for "Heroku Postgres" ‚Üí Select plan:</p>
        <ul>
        <li>Essential-0 ($5/month)</li>
        <li>Essential-1 ($9/month)</li>
        <li>‚Ä¶</li>
        </ul>
        </li>
        </ol>
        </div>
        <div style="font-size: 0.8em; margin-top: 20px;">
        üìö Guide (some parts still relevant): 
        <a href="https://github.com/oTree-org/otree-docs/blob/143a6ab7b61d54ec2be1a8bc09515d78e0b07c71/source/server/heroku.rst#heroku-setup-option-2">oTree Heroku Setup Guide</a>
        </div>
        <div style="font-size: 0.75em;">
        <p>Command line Database configuration:</p>
        <pre><code class="language-bash"># Add PostgreSQL addon (Essential-0 plan)
        heroku addons:create heroku-postgresql:essential-0

        # Check database URL
        heroku config:get DATABASE_URL
        </code></pre>

                </section>





            <section >
                
                <h4>oTree Development Tools</h4>
        <p><strong>oTree Studio</strong></p>
        <ul>
        <li>Visual editor, no coding required</li>
        <li>Drag-and-drop interface</li>
        <li>Free tier oTree Hub deployment</li>
        </ul>

                </section>





            <section >
                
                <h4>Database Options for oTree 5</h4>
        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
        <p><strong>SQLite</strong></p>
        <ul>
        <li>Built-in, no setup needed</li>
        <li>Good for:
        <ul>
        <li>Development</li>
        <li>Small experiments (&lt;40 users)</li>
        <li>Single server setups</li>
        </ul>
        </li>
        <li>Limitations:
        <ul>
        <li>Not for Heroku</li>
        <li>Poor with concurrent users</li>
        <li>Poor live_methods (parallel requests)</li>
        </ul>
        </li>
        </ul>
        </div>
        <div>
        <p><strong>PostgreSQL</strong></p>
        <ul>
        <li>Production-ready database</li>
        <li>Good for:
        <ul>
        <li>Large experiments</li>
        <li>Multiple concurrent users</li>
        <li>Cloud deployment (Heroku)</li>
        </ul>
        </li>
        <li>Features:
        <ul>
        <li>Easy backups</li>
        <li>Remote access</li>
        <li>Better performance</li>
        </ul>
        </li>
        </ul>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Summary: Typical oTree Development Workflow</h4>
        <div style="font-size: 0.75em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <ol>
        <li>
        <p>Plan &amp; Design</p>
        <ul>
        <li>Write experiment blueprint</li>
        <li>Define participant flow</li>
        <li>Plan data collection</li>
        <li>Choose hosting solution</li>
        </ul>
        </li>
        <li>
        <p>Setup Environment</p>
        <ul>
        <li>Install Python &amp; oTree</li>
        <li>Configure IDE (PyCharm/VS Code)</li>
        <li>Create virtual environment</li>
        <li>Initialize Git repository</li>
        </ul>
        </li>
        <li>
        <p>Development</p>
        <ul>
        <li>Create project structure</li>
        <li>Write models &amp; constants</li>
        <li>Create pages &amp; templates</li>
        <li>Add game logic</li>
        </ul>
        </li>
        </ol>
        </div>
        <div> <!-- Right Column -->
        <ol start="4">
        <li>
        <p>Local Testing</p>
        <ul>
        <li>Run <code>otree devserver</code></li>
        <li>Test all participant flows</li>
        <li>Debug &amp; fix issues</li>
        <li>Check data recording</li>
        </ul>
        </li>
        <li>
        <p>Version Control</p>
        <pre><code class="language-bash">git add .
        git commit -m "Ready for deployment"
        git push origin main
        </code></pre>
        </li>
        <li>
        <p>Deployment</p>
        <ul>
        <li>Deploy to Heroku</li>
        <li>Deploy to oTree Hub</li>
        <li>Deploy to ngrok</li>
        </ul>
        </li>
        </ol>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Platforms and Panels for Online Behavioral Research</h4>
        <div style="font-size: 0.75em;">
        <ul>
        <li><a href="https://doi.org/10.3758/s13428-021-01694-3">https://doi.org/10.3758/s13428-021-01694-3</a></li>
        <li>Platforms:
        <ul>
        <li>Prolific</li>
        <li>M-Turk</li>
        <li>Toloka</li>
        <li>Limited acess (sona-systems)</li>
        </ul>
        </li>
        </ul>
        </div>
                </section>





            <section >
                
                <h4>Prolific Integration: Flow Overview</h4>
        <div style="font-size: 0.75em;">
        <pre><code>Prolific ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&gt; oTree (url) 1-t page ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&gt; oTree (redirect) last page
        ‚Üë  ‚Üë__________________________|__________________________|
        ‚îÇ                             ‚îÇ
        ‚îî Experimenter (payoffs) ‚îÄ‚Äî‚Äî‚Äî‚Äî‚îò
        </code></pre>
        <p><strong>Key Points:</strong></p>
        <ol>
        <li>Prolific sends participant via URL with PID</li>
        <li>oTree runs experiment and stores data</li>
        <li>oTree redirects back to Prolific with completion code</li>
        <li>Experimenter downloads data and uploads bonuses</li>
        </ol>
        <p>üí° <strong>URLs:</strong></p>
        <ul>
        <li>url - To oTree:</li>
        </ul>
        <pre><code>`your-app.com/room/study?participant_label={PROLIFIC_PID}`
        </code></pre>
        <ul>
        <li>redirect - To Prolific:</li>
        </ul>
        <pre><code>`app.prolific.co/submissions/complete?cc=CODE`
        </code></pre>
        </div>
                </section>





            <section >
                
                <h4>Prolific Integration: Prerequisites</h4>
        <div style="font-size: 0.6em;display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
        <p><strong>Requirements:</strong></p>
        <ol>
        <li>
        <p>Development:</p>
        <ul>
        <li>IDE setup (PyCharm/VS Code)</li>
        <li>Working oTree project</li>
        <li>Git repository</li>
        </ul>
        </li>
        <li>
        <p>Deployment:</p>
        <ul>
        <li>Heroku account</li>
        <li>PostgreSQL addon</li>
        <li>HTTPS enabled</li>
        </ul>
        </li>
        <li>
        <p>Integration:</p>
        <ul>
        <li>Prolific account</li>
        <li>Room configuration</li>
        <li>Completion codes</li>
        </ul>
        </li>
        </ol>
        </div>
        <div>
        <p><strong>Sides:</strong></p>
        <ol>
        <li>
        <p><strong>Prolific:</strong></p>
        <ul>
        <li>Participant recruitment</li>
        <li>Payment processing</li>
        <li>Study management</li>
        </ul>
        </li>
        <li>
        <p><strong>oTree:</strong></p>
        <ul>
        <li>Experiment hosting</li>
        <li>Data collection</li>
        <li>Session management</li>
        </ul>
        </li>
        <li>
        <p><strong>Experimenter:</strong></p>
        <ul>
        <li>Setup integration</li>
        <li>Monitor sessions</li>
        <li>Process payments</li>
        </ul>
        </li>
        </ol>
        </div>
                </section>





            <section >
                
                <h4>Prolific Integration: oTree Side</h4>
        <div style="font-size: 0.6em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
        <p><strong>1. Room Configuration</strong> (<code>settings.py</code>):</p>
        <ul>
        <li>Create room for Prolific study</li>
        <li>Set display name</li>
        <li>Remove participant label file</li>
        </ul>
        <p><strong>2. Store Prolific ID</strong> (early app):</p>
        <ul>
        <li>Add prolific_id field to Player model</li>
        <li>Extract ID from participant.label</li>
        <li>Store after consent page</li>
        </ul>
        <p><strong>3. Configure Completion</strong> (<code>settings.py</code>):</p>
        <ul>
        <li>Add completionlink to session config</li>
        <li>Use placeholder until study creation</li>
        <li>Update with real code from Prolific</li>
        </ul>
        </div>
        <div>
        <p><strong>4. Setup Redirect</strong> (final app):</p>
        <ul>
        <li>Configure completion link in last page</li>
        <li>Add JavaScript redirect</li>
        <li>Test redirect flow</li>
        </ul>
        <p>üí° <strong>Important:</strong></p>
        <ul>
        <li>Test complete flow in development</li>
        <li>Verify ID storage</li>
        <li>Check completion redirect</li>
        <li>Validate data export</li>
        </ul>
        <p>Guide with more details: <a href="https://dallasnova.rbind.io/post/running-otree-on-prolific-for-beginners/">Running oTree on Prolific for Beginners</a></p>
        </div>
        </div>  
                </section>





            <section >
                
                <h4>Prolific Integration: Prolific Side</h4>
        <div style="font-size: 0.6em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <p><strong>1. Configure Study URL:</strong></p>
        <ul>
        <li>Go to "Study Settings"</li>
        <li>Find "How to record Prolific IDs"</li>
        <li>Paste your Heroku room URL</li>
        <li>Select "URL parameters" option</li>
        </ul>
        <p><strong>2. Set URL Parameters:</strong></p>
        <ul>
        <li>Keep <code>participant_label</code> as parameter</li>
        <li>Full URL format:</li>
        </ul>
        <pre><code>your-app.com/room/study?participant_label={PROLIFIC_PID%}
        </code></pre>
        </div>
        <div> <!-- Right Column -->
        <p><strong>3. Completion Setup:</strong></p>
        <ul>
        <li>Get completion code from Prolific</li>
        <li>Update your oTree config:</li>
        </ul>
        <pre><code>completionlink=
        'https://app.prolific.co/submissions/complete?cc=XXXX'
        </code></pre>
        <p>üí° <strong>Important:</strong></p>
        <ul>
        <li>Test URL in Preview mode</li>
        <li>Verify ID recording</li>
        <li>Check completion redirect</li>
        <li>Monitor submissions</li>
        </ul>
        </div>
        </div>
        <div style="text-align: center; margin-top: -110px;">
        <div style="transform: scale(0.7);">
        <p><img src="/assets/html/export/images/record_prolific_id.png" alt="Prolific ID Setup"></p>
        </div>
        </div>
                </section>





            <section >
                
                <h4>Prolific Integration: Experimenter Side</h4>
        <div style="font-size: 0.6em; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div> <!-- Left Column -->
        <p><strong>1. Data Verification:</strong></p>
        <ul>
        <li>Check completion status</li>
        <li>Verify stored Prolific IDs</li>
        <li>Review recorded bonuses</li>
        <li>Export data from oTree</li>
        </ul>
        <p><strong>2. Payment Processing:</strong></p>
        <ul>
        <li>Return to Prolific study page</li>
        <li>Options for bonus payments:
        <ul>
        <li>Manual approval</li>
        <li>Bulk actions for large studies</li>
        </ul>
        </li>
        </ul>
        </div>
        <div> <!-- Right Column -->
        <p><strong>3. Important Notes:</strong></p>
        <ul>
        <li>Prolific charges processing fee</li>
        <li>Base payment for participation</li>
        <li>Bonuses are additional</li>
        <li>Monitor dropout rates</li>
        </ul>
        <p>üí° <strong>Resources:</strong></p>
        <ul>
        <li><a href="https://dallasnova.rbind.io/post/running-otree-on-prolific-for-beginners/">Prolific Guide</a></li>
        <li><a href="https://hr.otreehub.com/">oTree Hub</a></li>
        </ul>
        </div>
        </div>
        <div style="text-align: center; margin-top: -100px;">
        <div style="transform: scale(0.7);">
        <p><img src="/assets/html/export/images/prolific_payment.png" alt="Prolific Payment"></p>
        </div>
        </div>
        </section>


</body>