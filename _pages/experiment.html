---
layout: single
title: "Experiment"
permalink: /experiment/
author_profile: true
---

<div style="text-align: center; padding: 20px;">
    <iframe 
        id="experimentFrame"
        src="https://belabeu-e7061ee8ef78.herokuapp.com/demo/dsst?test=1"
        style="width: 100%; height: 800px; border: none; border-radius: 4px;"
    ></iframe>
</div>

<script>
// Функция для извлечения кода сессии
function extractSessionCode(text) {
    const match = text.match(/SessionStartLinks\/([a-z0-9]+)/);
    return match ? match[1] : null;
}

// Слушаем загрузку iframe
frame.addEventListener('load', function() {
    // Прокручиваем iframe до нужной позиции
    try {
        frame.contentWindow.scrollTo(0, 473.5);
    } catch(e) {
        console.log('Cannot scroll iframe');
    }
});

// Ждем сообщение с кодом сессии
const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        mutation.addedNodes.forEach((node) => {
            if (node.textContent && node.textContent.includes('SessionStartLinks')) {
                const sessionCode = extractSessionCode(node.textContent);
                if (sessionCode) {
                    console.log('Found session code:', sessionCode);
                    const splitScreenUrl = `https://belabeu-e7061ee8ef78.herokuapp.com/SessionSplitScreen/${sessionCode}`;
                    frame.src = splitScreenUrl;
                    observer.disconnect();
                }
            }
        });
    });
});

// Начинаем наблюдение за сообщениями
observer.observe(document.body, {
    childList: true,
    subtree: true
});
</script> 